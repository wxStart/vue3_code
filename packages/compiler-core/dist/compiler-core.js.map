{
  "version": 3,
  "sources": ["../src/runtimeHelpers.ts", "../src/ast.ts", "../src/generate.ts", "../src/parser.ts", "../src/transforms/transformElement.ts", "../src/transforms/transformExprrssion.ts", "../src/transforms/transformText.ts", "../src/transform.ts", "../src/index.ts"],
  "sourcesContent": ["export const TO_DISPLAY_STRING = Symbol('TO_DISPLAY_STRING');\nexport const CREATE_TEXT_VNODE = Symbol('CREATE_TEXT_VNODE');\nexport const CREATE_ELEMENT_VNODE = Symbol('CREATE_ELEMENT_VNODE');\n\nexport const OPEN_BLOCK = Symbol('OPEN_BLOCK');\nexport const CREATE_ELEMENT_BLOCK = Symbol('CREATE_ELEMENT_BLOCK');\n\nexport const Fragment = Symbol('Fragment');\n\nexport const helperMap = {\n  [TO_DISPLAY_STRING]: 'toDisplayString',\n  [CREATE_TEXT_VNODE]: 'createTextVnode',\n  [CREATE_ELEMENT_VNODE]: 'createElementVnode',\n  [OPEN_BLOCK]: 'openBlock',\n  [CREATE_ELEMENT_BLOCK]: 'createElementBlock',\n  [Fragment]: 'Fragment',\n};\n", "import {\n  CREATE_ELEMENT_VNODE,\n  CREATE_TEXT_VNODE,\n  Fragment,\n} from './runtimeHelpers';\n\nexport enum NodeTypes {\n  ROOT,\n  ELEMENT,\n  TEXT,\n  COMMENT,\n  SIMPLE_EXPRESSION, // \u7B80\u5355\u8868\u8FBE\u5F0F 1+1\n  INTERPOLATION, // {{ name }}\n  ATTRIBUTE,\n  DIRECTIVE,\n  // containers\n  COMPOUND_EXPRESSION, // {{name}} + 'abc\n  IF,\n  IF_BRANCH,\n  FOR,\n  TEXT_CALL,\n  // codegen\n  VNODE_CALL,\n  JS_CALL_EXPRESSION,\n  JS_OBJECT_EXPRESSION,\n  JS_PROPERTY,\n  JS_ARRAY_EXPRESSION,\n  JS_FUNCTION_EXPRESSION,\n  JS_CONDITIONAL_EXPRESSION,\n  JS_CACHE_EXPRESSION,\n\n  // ssr codegen\n  JS_BLOCK_STATEMENT,\n  JS_TEMPLATE_LITERAL,\n  JS_IF_STATEMENT,\n  JS_ASSIGNMENT_EXPRESSION,\n  JS_SEQUENCE_EXPRESSION,\n  JS_RETURN_STATEMENT,\n}\n\nexport function createCallExpression(context, arg) {\n  const name = context.helper(CREATE_TEXT_VNODE);\n\n  return {\n    type: NodeTypes.JS_CALL_EXPRESSION, // create\n    arguments: arg,\n    callee: name,\n  };\n}\n\nexport function createVnodeCall(context, tag, prosp, children) {\n  // createElementVnode()\n  let name = tag;\n  if (tag !== Fragment) {\n    name = context.helper(CREATE_ELEMENT_VNODE);\n  }\n  return {\n    type: NodeTypes.VNODE_CALL,\n    tag,\n    prosp,\n    children,\n    callee: name,\n  };\n}\n\nexport function createObjectExpression(properies) {\n  return {\n    type: NodeTypes.JS_OBJECT_EXPRESSION,\n    properies,\n  };\n}\n", " // \u8FD9\u4E2A\u6587\u4EF6\u7684\u76EE\u7684\u5C31\u662F\u628A \u6A21\u7248\u8F6C\u5316\u6210 render\u51FD\u6570\n//  \u6A21\u7248\u8F6C\u5316\u7F51\u7AD9 https://template-explorer.vuejs.org/\n\nimport { NodeTypes } from './ast';\nimport {\n  CREATE_ELEMENT_BLOCK,\n  CREATE_ELEMENT_VNODE,\n  helperMap,\n  OPEN_BLOCK,\n  TO_DISPLAY_STRING,\n} from './runtimeHelpers';\n\nfunction createCodegenContext(ast) {\n  const context = {\n    code: ``,\n    level: 0,\n    helper(name) {\n      return `_${helperMap[name]}`;\n    },\n    push(code) {\n      context.code += code;\n    },\n    indent() {\n      newLine(++context.level);\n    },\n    deIndent(noNewLine = false) {\n      if (noNewLine) {\n        --context.level;\n      } else {\n        newLine(--context.level);\n      }\n    },\n\n    newLine() {\n      // \u6362\u884C\n      newLine(context.level);\n    },\n  };\n\n  // \u6362\u884C\u7F29\u8FDB\n  function newLine(n) {\n    context.push('\\n' + `  `.repeat(n));\n  }\n\n  return context;\n}\n\nfunction getFunctionPreamble(ast, context) {\n  const { push, indent, deIndent, newLine, helper } = context;\n\n  if (ast.helpers.length > 0) {\n    push(\n      `const { ${ast.helpers.map(\n        (item) => `${helperMap[item]}:${helper(item)}`\n      )} }  = Vue`\n    );\n    // \u76F8\u5F53\u4E8E\u4ECE Vue\n    // const { createElementVnode:_createElementVnode,Fragment:_Fragment,createElementBlock:_createElementBlock,openBlock:_openBlock }  = Vue\n\n    newLine();\n    newLine();\n  }\n\n  push(`return function render(_ctx){`);\n}\n\nfunction genText(node, context) {\n  context.push(JSON.stringify(node.content));\n}\n\nfunction genInterpolation(node, context) {\n  const { push, indent, deIndent, newLine, helper } = context;\n  push(`${helper(TO_DISPLAY_STRING)}(`);\n  genNode(node.content, context);\n  push(')');\n  debugger;\n}\n\nfunction genExpression(node, context) {\n  context.push(node.content);\n}\n\nfunction genVnodeCall(node, context) {\n    debugger\n  const { push, indent, deIndent, newLine, helper } = context;\n  const { tag, props, children, isBlock } = node;\n  if (isBlock) {\n    push(`(${helper(OPEN_BLOCK)}(),`);\n  }\n  const h = isBlock ? CREATE_ELEMENT_BLOCK : CREATE_ELEMENT_VNODE;\n  console.log('helper[h]: ', helper[h]);\n\n  push(`${helper(h)}(`);\n\n  //! \u8FD9\u91CC\u6839\u636E tag, props, children, \u518D\u53BB\u751F\u6210\u5185\u5BB9 \u62FC\u63A5\u7B49  \u5C31\u4E0D\u5199\u4E86 \u6E90\u7801\u91CC\u9762\u6709\u5F88\u591A\u751F\u6210 \u90FD\u6CA1\u6709\u5199\n  push(`)`);\n  if (isBlock) {\n    push(`)`);\n  }\n}\nfunction genNode(node, context) {\n  const { push, indent, deIndent, newLine } = context;\n  debugger;\n  switch (node.type) {\n    case NodeTypes.TEXT:\n      // let template = `123`;\n      genText(node, context);\n      break;\n    case NodeTypes.INTERPOLATION:\n      genInterpolation(node, context);\n      break;\n    case NodeTypes.SIMPLE_EXPRESSION:\n      genExpression(node, context);\n      break;\n    case NodeTypes.VNODE_CALL:\n      genVnodeCall(node, context);\n      break;\n  }\n}\nexport function generate(ast) {\n  debugger;\n  const context = createCodegenContext(ast);\n\n  getFunctionPreamble(ast, context);\n\n  const { push, indent, deIndent, newLine, helper } = context;\n\n  indent();\n  push(`return `);\n  if (ast.codegenNode) {\n    genNode(ast.codegenNode, context);\n  } else {\n    //       let template = ``;\n    push(`null`);\n  }\n  deIndent();\n  push(`}`);\n  console.log('context.code: ');\n  console.log(context.code);\n\n  return context.code;\n}\n", "import { NodeTypes } from './ast';\n\nfunction createParserContext(content) {\n  return {\n    originalSource: content,\n    source: content, // \u64CD\u4F5C\u7684\u662F\u8FD9\u4E2A\u5B57\u7B26\u4E32\u0192 \u4E0D\u65AD\u89E3\u6790\n    line: 1,\n    column: 1,\n    offest: 0,\n  };\n}\n\nfunction isEnd(context) {\n  const c = context.source;\n  if (c.startsWith('</')) {\n    // \u5B69\u5B50\u9047\u5230\u8FD9\u79CD\u7684\u65F6\u5019\u4E5F\u662F\u7ED3\u675F\u7684 <div><span></span></div>\n    // \u6B64\u8981\u8FD4\u56DE sapn \u5904\u7406\u5B8C\u6210\u4E86  source =  </div> \u4F46\u662F\u4E5F\u662F\u8981\u8FD4\u56DE\u7684\n    /**\n     if (context.source.startsWith('</')) {\n         parseTag(context); \n     } \n     */\n    return true;\n  }\n  return !context.source; // \u5185\u5BB9\u6CA1\u6709\n}\n\nfunction advancePositionWithMutation(context, source, endIndex) {\n  let linesCount = 0;\n  let linePos = -1;\n  for (let i = 0; i < endIndex; i++) {\n    if (source.charCodeAt(i) == 10) {\n      // 10 \u662F\u6362\u884C\u7B26\n      linesCount++;\n      linePos = i; // \u6362\u884C\u7684\u4F4D\u7F6E\n      console.log('linePost: ', linePos);\n    }\n  }\n  context.line += linesCount; // \u786E\u5B9A\u884C\u6570\n  context.offest += endIndex;\n  context.column =\n    linePos == -1 ? context.column + endIndex : endIndex - linePos;\n}\n// \u622A\u53D6\u4F4D\u7F6E\nfunction advanceBy(context, endIndex) {\n  let source = context.source;\n  // \u4FEE\u6539\u6700\u65B0\u7684\u504F\u79FB\u91CF\u91CF\u4FE1\u606F\n  advancePositionWithMutation(context, source, endIndex);\n  // \u5220\u9664  context.source \u524DendIndex\u4E2A\u5B57\u7B26\n  context.source = source.slice(endIndex);\n}\n\nfunction parseTextData(context, endIndex) {\n  const content = context.source.slice(0, endIndex);\n  advanceBy(context, endIndex); // \u5220\u6389\u7684\u4F4D\u7F6E\n  return content;\n}\n\nfunction getCursor(context) {\n  const { line, column, offest } = context;\n\n  return { line, column, offest };\n}\nfunction getSelection(context, start, end?) {\n  end = end || getCursor(context);\n\n  return {\n    start,\n    end,\n    source: context.originalSource.slice(start.offest, end.offest),\n  };\n}\nfunction parseText(context) {\n  let tonkens = ['<', '{{']; // \u627E\u5230\u4ED6\u4E24\u79CD\u79BB\u5F97\u6700\u8FD1\u7684\u4E00\u4E2A\n  let endIndex = context.source.length;\n  for (let i = 0; i < tonkens.length; i++) {\n    const index = context.source.indexOf(tonkens[i]);\n    if (index !== -1 && index < endIndex) {\n      endIndex = index;\n    }\n  }\n  // \u521B\u5EFA\u4FE1\u606F \u884C\u5217\n  let start = getCursor(context);\n  // 0 ~ endIndex  \u4E3A\u6587\u672C\u5185\u5BB9\n  let content = parseTextData(context, endIndex);\n\n  return {\n    type: NodeTypes.TEXT,\n    content,\n    loc: getSelection(context, start),\n  };\n}\n\nfunction parseInterpolation(context) {\n  let start = getCursor(context); // \u83B7\u53D6\u5F00\u59CB\u7684\u4F4D\u7F6E\n\n  const colseIndex = context.source.indexOf('}}', '{{'.length); // \u4ECE\u2018{{\u201D \u5B57\u7B26\u4F4D\u7F6E\u5F00\u59CB\u67E5\u627E\n\n  advanceBy(context, 2); // \u5220\u9664 {{\n\n  //! \u4F4D\u7F6E1111  (\u8FD9\u91CC\u62FF\u7A7A\u683C\u7684) \u8FD9\u91CC\u62FF\u5230 \u63D2\u503C\u8BED\u6CD5\u4E2D name\u524D\u9762\u7684\u7A7A\u683C \u4E2D\u7B2C\u4E00\u4E2A\u4E5F\u5C31\u662F \u63D2\u503C\"{{\"\u540E\u9762\u7684\u4F4D\u7F6E  return { line, column, offest };\n  const innerStart = getCursor(context);\n  const innerEnd = getCursor(context);\n  // \u62FF\u5230\u539F\u59CB\u7684\u5185\u5BB9\n  const rawContentLength = colseIndex - 2; // \u5DF2\u7ECF\u79FB\u9664\u4E86 {{  \u6240\u4EE5\u51CF\u53BB2\n\n  const preContent = parseTextData(context, rawContentLength); // \u53EF\u4EE5\u62FF\u5230\u6587\u672C\u5185\u5BB9 \u5E76\u4E14\u53EF\u4EE5\u66F4\u65B0\u4F4D\u7F6E\u4FE1\u606F\n\n  const content = preContent.trim();\n\n  const startOffect = preContent.indexOf(content);\n\n  if (startOffect > 0) {\n    // \u8BF4\u660E\u524D\u9762\u6709\u7A7A\u683C  \u66F4\u65B0 innerStart \u7684\u4FE1\u606F  //! \u66F4\u65B0 \u4F4D\u7F6E1111 innerStart = { line, column, offest }\u7684\u4FE1\u606F\n    advancePositionWithMutation(innerStart, preContent, startOffect); //! {{    name     }} \u628A{{ \u548Cname\u4E4B\u95F4\u7684\u7A7A\u8FDB\u884C\u504F\u79FB \u5C31\u77E5\u9053name\u7684offest\u4E86\n  }\n  let endOffset = startOffect + content.length;\n  //   \u66F4\u65B0 innerEnd \u7684\u4FE1\u606F  //! \u66F4\u65B0 \u4F4D\u7F6E1111  innerEnd = { line, column, offest }\u7684\u4FE1\u606F\n  advancePositionWithMutation(innerEnd, preContent, endOffset);\n  advanceBy(context, 2); // \u5220\u9664 }}\n  return {\n    type: NodeTypes.INTERPOLATION,\n    content: {\n      type: NodeTypes.SIMPLE_EXPRESSION,\n      content,\n      loc: getSelection(context, innerStart, innerEnd),\n    },\n    loc: getSelection(context, start),\n  };\n}\n\n// \u5220\u9664\u7A7A\u683C\nfunction advanceBySpaces(context) {\n  const match = /^[ \\t\\r\\n\\f]*/.exec(context.source);\n  if (match) {\n    advanceBy(context, match[0].length);\n  }\n}\n\nfunction parseAttributeValue(context) {\n  let quote = context.source[0];\n\n  const isQuoted = quote === \"'\" || quote === '\"';\n  let content;\n  if (isQuoted) {\n    advanceBy(context, 1); // \u53BB\u9664\u7B2C\u4E00\u4E2A\u5F15\u53F7\n    const endIndex = context.source.indexOf(quote, 1);\n    content = parseTextData(context, endIndex);\n    advanceBy(context, 1); // \u53BB\u9664\u503C\u540E\u9762\u7684\u5F15\u53F7\n    advanceBySpaces(context);\n  } else {\n    console.log(\n      'context.source.match(/([^ \\t\\r\\n/>])+/): ',\n      context.source.match(/([^ \\t\\r\\n/>])+/)\n    );\n    content = context.source.match(/([^ \\t\\r\\n/>])+/)[0];\n    advanceBy(context, content.length); // \u53BB\u9664\u503C\n    advanceBySpaces(context);\n  }\n\n  return content;\n}\nfunction parseAttribute(context) {\n  const start = getCursor(context);\n  let match = /^[^\\t\\r\\n\\f />][^\\t\\r\\n\\f />=]*/.exec(context.source);\n  console.log('parseAttribute match: ', match);\n  const name = match[0]; // \u5C5E\u6027\u540D\n  advanceBy(context, name.length);\n  let vlaue;\n  if (/^[ \\t\\r\\n\\f]*=/.test(context.source)) {\n    advanceBySpaces(context);\n    advanceBy(context, 1); // \u5220=\n    advanceBySpaces(context);\n    vlaue = parseAttributeValue(context);\n  }\n\n  const loc = getSelection(context, start); // \u5904\u7406\u5B8C\u5C5E\u6027 \u8BA1\u7B97\u5C5E\u6027\u7684\u4F4D\u7F6E\u4FE1\u606F\n  return {\n    type: NodeTypes.ATTRIBUTE,\n    name,\n    value: {\n      type: NodeTypes.TEXT,\n      content: vlaue,\n      loc: loc,\n    },\n    loc: getSelection(context, start),\n  };\n}\n\nfunction parseAttributes(context) {\n  const props = [];\n\n  while (context.source.length > 0 && !context.source.startsWith('>')) {\n    props.push(parseAttribute(context));\n    advanceBySpaces(context); // \u53BB\u7A7A\u683C\n  }\n\n  return props;\n}\n\nfunction parseTag(context) {\n  const start = getCursor(context);\n  // https://regexper.com/\n  const match = /^<\\/?([a-z][^ \\t\\r\\n/>]*)/.exec(context.source);\n  console.log('match: ', match);\n  const tag = match[1];\n  advanceBy(context, match[0].length);\n  advanceBySpaces(context);\n\n  // \u8FD9\u91CC\u6709\u53EF\u80FD\u6709\u5C5E\u6027 <div  a=\"1\" b='2' ></div>\n\n  let props = parseAttributes(context);\n  console.log('props: ', props);\n\n  let isSelfClosing = context.source.startsWith('/>');\n  if (isSelfClosing) {\n  }\n  advanceBy(context, isSelfClosing ? 2 : 1); // \u770B\u662F\u5220\u9664 \"/>\"\" \u8FD8\u662F \">\"\n\n  return {\n    type: NodeTypes.ELEMENT,\n    tag,\n    isSelfClosing,\n    children: [],\n    props,\n    loc: getSelection(context, start),\n  };\n}\n\nfunction parseElement(context) {\n  // \u89E3\u6790\u6807\u7B7E <br /> <div a=\"12\" ></div>\n  let ele = parseTag(context);\n\n  // \u8FD9\u91CC\u662F\u5143\u7D20\u91CC\u9762\u7684\u5B69\u5B50\n  let children = parserChildren(context); // \u5904\u7406\u513F\u5B50\n  ele.children = children;\n\n  if (context.source.startsWith('</')) {\n    parseTag(context); // <div></div> \u79FB\u9664\u540E\u7EED\u7684</div>\n  }\n  ele.loc = getSelection(context, ele.loc.start); // \u91CD\u65B0\u8BA1\u7B97\u4F4D\u7F6E\u4FE1\u606F\n\n  return ele;\n}\n\nfunction parserChildren(context) {\n  const nodes = [];\n\n  while (!isEnd(context)) {\n    const c = context.source;\n    let node;\n    if (c.startsWith('{{')) {\n      // {{  xxx }}\n      node = parseInterpolation(context);\n    } else if (c[0] == '<') {\n      // \u5143\u7D20  </div>\n      node = parseElement(context);\n    } else {\n      // \u6587\u672C   abd {{name}} \u6216\u8005\u662F abd  <div></div>\n      node = parseText(context);\n    }\n    nodes.push(node);\n  }\n  console.log('nodes: 111', nodes);\n\n  for (let index = 0; index < nodes.length; index++) {\n    const node = nodes[index];\n    if (node.type == NodeTypes.TEXT) {\n      if (!/[^\\t\\r\\n\\f ]/.test(node.content)) {\n        nodes[index] = null;\n      } else {\n        node.content = node.content.replace(/[\\t\\r\\n\\f ]+/g, ' ');\n      }\n    }\n  }\n  return nodes.filter(Boolean);\n}\n\nfunction createRoot(children, loc) {\n  return {\n    type: NodeTypes.ROOT,\n    children,\n    loc,\n  };\n}\n\nexport function parse(template) {\n  // \u6839\u636Etemplate \u4EA7\u751F\u4E00\u68F5\u6811  line  column  offest\n\n  const context = createParserContext(template);\n\n  const start = getCursor(context);\n  const children = parserChildren(context);\n  return createRoot(children, getSelection(context, start));\n}\n", "import { createObjectExpression, createVnodeCall, NodeTypes } from '../ast';\n\nexport function transformElement(node, context) {\n  // \u5904\u7406\u5143\u7D20\n  if (node.type === NodeTypes.ELEMENT) {\n    console.log('\u5143\u7D20', node);\n    return function () {\n      // \u56E0\u4E3A\u5143\u7D20\u6709\u53EF\u80FD\u9700\u8981\u6587\u672C\u5904\u7406\u7ED3\u675F\u540E\u8FD8\u9700\u8981\u5904\u7406\u4E1C\u897F\n      // \u505A\u4E2A\u5EF6\u65F6\u5904\u7406\n      console.log('\u5143\u7D20 \u5EF6\u8FDF\u51FD\u6570\uFF1A \u6587\u672C\u5904\u7406\u540E', node);\n\n      const { tag: vnodeTag, props, children } = node;\n      // \u5904\u7406\u5C5E\u6027\n      let properties = [];\n      for (let i = 0; i < props.length; i++) {\n        properties.push({\n          key: props[i].name,\n          value: props[i].value.content,\n        });\n      }\n      const propsExpression = properties.length\n        ? createObjectExpression(properties)\n        : null;\n\n      let vnodeChildren = null;\n\n      if (children.length === 1) {\n        vnodeChildren = children[0];\n      } else if (children.length > 1) {\n        vnodeChildren = children;\n      }\n      node.codegenNode = createVnodeCall(\n        context,\n        vnodeTag,\n        propsExpression,\n        vnodeChildren\n      );\n      debugger;\n    };\n  }\n}\n", "import { NodeTypes } from \"../ast\";\n\nexport function transformExprrssion(node, context) {\n  // \u5904\u7406\u8868\u8FBE\u5F0F\n  if (node.type === NodeTypes.INTERPOLATION) {\n    debugger;\n    let content = node.content.content;\n    node.content.content = `_ctx.${content}`;\n  }\n}\n", "import { PatchFlags } from '@vue/shared';\nimport { createCallExpression, NodeTypes } from '../ast';\n\nexport function isText(node) {\n  return node.type === NodeTypes.INTERPOLATION || node.type === NodeTypes.TEXT;\n}\n\nexport function transformText(node, context) {\n  // \u5904\u7406\u6587\u672C\n  if (node.type === NodeTypes.ELEMENT || node.type == NodeTypes.ROOT) {\n    console.log('\u5143\u7D20 \u4E2D\u7684\u6587\u672C', node);\n\n    return function () {\n      // \u9700\u8981\u7B49  transformExprrssion \u51FD\u6570\u5904\u7406\u5B8C\u6BD5\u624D\u5904\u7406 \u6240\u4EE5\u653E\u5728\u4E86 return\u51FD\u6570\u91CC\u9762\n      // \u9047\u5230\u591A\u4E2A\u8FDE\u7EED\u7684\u5B50\u8282\u70B9 \u9700\u8981\u5904\u7406\u5B8C\u6210\u540E \u8FD9\u65F6\u5019\u624D\u4F1A\u53BB\u5904\u7406\u7236\u8282\u70B9 \u91CD\u65B0\u6539\u53D8\u4ED6\u7684children\n\n      // <div>{{abc}}  1234</div>\n      // {{abc}} 1234    \u4ED6\u4EEC\u662F\u4E24\u4E2A\u8282\u70B9\u9700\u8981\u5408\u6210\u4E00\u4E2A  \u9700\u8981\u8F6C\u5316\u4E3A   CNodeTypes.OMPOUND_EXPRESSION\n\n      let container = null;\n      let children = node.children;\n      let hasText = false;\n      for (let i = 0; i < children.length; i++) {\n        let child = children[i];\n        if (isText(child)) {\n          hasText = true;\n          // \u770B\u4E00\u4E0B\u4E0B\u4E00\u4E2A\u5B69\u5B50\n          for (let j = i + 1; j < children.length; j++) {\n            if (isText(child)) {\n              let next = children[j];\n              if (isText(next)) {\n                if (!container) {\n                  container = children[i] = {\n                    type: NodeTypes.COMPOUND_EXPRESSION,\n                    children: [child],\n                  };\n                }\n                container.children.push('+', next); // \u5220\u9664\u62FC\u63A5\u7684\u8282\u70B9\n                children.splice(j, 1);\n                j--;\n              } else {\n                container = null;\n                break;\n              }\n            }\n          }\n        }\n      }\n\n      // \u5982\u679C\u6587\u672C \u8981\u770B\u6587\u672C\u8282\u70B9\u662F\u4E0D\u662F\u53EA\u6709\u4E00\u4E2A  \u53EA\u6709\u4E00\u4E2A \u4E0D\u9700\u8981\u8FDB\u884C createTextVnode\n\n      if (!hasText || children.length == 1) {\n        return;\n      }\n\n      for (let i =0; i < children.length; i++) {\n        const child = children[i];\n        if (isText(child) || child.type == NodeTypes.COMPOUND_EXPRESSION) {\n          const args = [];\n          args.push(child);\n          if (child.type !== NodeTypes.TEXT) {\n            // \u8BF4\u660E\u662F\u52A8\u6001\u5143\u7D20 \u63D2\u503C\u8BED\u6CD5\u7684\n            args.push(PatchFlags.TEXT);\n          }\n          children[i] = {\n            type: NodeTypes.TEXT_CALL, // \u6807\u8BB0\u8BF4\u660E\u9700\u8981 \u4F7F\u7528 createTextVnode\n            content: child,\n            codegenNode: createCallExpression(context, args), // createTextVnode(\u5185\u5BB9\uFF0Cargs)\n          };\n        }\n      }\n      //\n      //\n\n      console.log('\u6587\u672C \u5EF6\u8FDF\u51FD\u6570\uFF1A \u6587\u672C\u5904\u7406\u540E', node);\n    };\n  }\n}\n", "import { createVnodeCall, NodeTypes } from './ast';\nimport {\n  CREATE_ELEMENT_BLOCK,\n  CREATE_ELEMENT_VNODE,\n  OPEN_BLOCK,\n  TO_DISPLAY_STRING,\n  Fragment,\n} from './runtimeHelpers';\nimport { transformElement } from './transforms/transformElement';\nimport { transformExprrssion } from './transforms/transformExprrssion';\nimport { transformText } from './transforms/transformText';\n\nfunction createTransformContext(root) {\n  const context = {\n    currentNode: root,\n    parent: null,\n    transformNode: [transformElement, transformText, transformExprrssion],\n    helpers: new Map(),\n    helper(name) {\n      const count = context.helpers.get(name) || 0;\n      context.helpers.set(name, count + 1);\n      return name;\n    },\n\n    removeHelper(name) {\n      const count = context.helpers.get(name);\n      if (count) {\n        let c = count - 1;\n        if (!c) {\n          context.helpers.delete(name);\n        } else {\n          context.helpers.set(name, c);\n        }\n      }\n    },\n  };\n\n  return context;\n}\n\nfunction traverseNode(node, context) {\n  context.currentNode = node;\n  const transforms = context.transformNode;\n\n  const exits = []; // \u3010\u5143\u7D20\u7684\u5EF6\u8FDF\u51FD\u6570\uFF0C \u6587\u672C\u7684\u5EF6\u8FDF\u51FD\u6570  \u8868\u8FBE\u5F0F\u7684\u5EF6\u8FDF\u51FD\u6570\u3011\n\n  for (let i = 0; i < transforms.length; i++) {\n    let exit = transforms[i](node, context); // \u5BF9\u6BCF\u4E00\u4E2A\u8282\u70B9\u5C1D\u8BD5 \u4E09\u79CD\u5904\u7406\u65B9\u6CD5\n    exit && exits.push(exit);\n  }\n\n  switch (node.type) {\n    case NodeTypes.ROOT:\n    case NodeTypes.ELEMENT:\n      // \u6709\u513F\u5B50\u9700\u8981\u5904\u7406\n      for (let i = 0; i < node.children.length; i++) {\n        context.parent = node;\n        traverseNode(node.children[i], context);\n      }\n      break;\n    case NodeTypes.INTERPOLATION:\n      // \u5BF9\u8868\u8FBE\u5F0F\u7684\u5904\u7406\n      context.helper(TO_DISPLAY_STRING);\n      break;\n  }\n\n  let i = exits.length;\n  if (i) {\n    while (i--) {\n      exits[i]();\n    }\n  }\n}\n\nfunction createRootCodegenNode(ast, context) {\n  let { children } = ast;\n  if (children.length == 1) {\n    let child = children[0];\n    if (child.type == NodeTypes.ELEMENT) {\n      /*\n            let template = `<div a = 123    b='a' c = \"123\" >\n        {{a123}}    asd {{name}}    asd\n    </div>`;\n\n      */\n      ast.codegenNode = child.codegenNode;\n      context.removeHelper(CREATE_ELEMENT_VNODE);\n      context.helper(CREATE_ELEMENT_BLOCK);\n      context.helper(OPEN_BLOCK);\n      ast.codegenNode.isBlock = true;\n    } else {\n      /*\n            let template = `DSADSAD`;\n\n      */\n      ast.codegenNode = child;\n    }\n  } else if (children.length > 0) {\n    /*\n            let template = `<div a='1'></div> <div b='2'></div>`;\n    */\n    // \u4EA7\u751F\u4E00\u4E2A Fragment\n    ast.codegenNode = createVnodeCall(\n      context,\n      context.helper(Fragment),\n      null,\n      children\n    );\n    context.helper(CREATE_ELEMENT_BLOCK);\n    context.helper(OPEN_BLOCK);\n    ast.codegenNode.isBlock = true;\n  }\n}\n\nexport function transform(ast) {\n  const context = createTransformContext(ast);\n  traverseNode(ast, context);\n  /*\n  \u5BF9\u6839\u8282\u70B9\u7684\u5904\u7406 \uFF1A \n  1.\u6587\u82EF  \uFF1A\u6587\u672C\u8BF6\u8363\n  2. \u4E00\u4E2A\u5143\u7D20\uFF1A<div></div>  createElementVnode ---\u53D8\u4E3A--->createElementBlock\n  3. \u591A\u4E2A\u5143\u7D20 :  <div></div><div></div>    createElementBlock(Fragment)\n*/\n\n  createRootCodegenNode(ast, context);\n\n  ast.helpers = [...context.helpers.keys()];\n}\n", "// \u7F16\u8BD1\u4E3B\u8981\u5206\u4E3A\u4E09\u6B65\uFF1A\n// 1. \u9700\u8981\u5C06\u6A21\u7248\u8F6C\u5316\u4E3Aast\u8BED\u6CD5\u6811\n// 2. \u8F6C\u5316\u751F\u6210codegennode\n// 3. \u8F6C\u5316\u6210render\u51FD\u6570\n\nimport { generate } from './generate';\nimport { parse } from './parser';\nimport { transform } from './transform';\n\nexport { parse };\n\nexport function compile(template) {\n  const ast = parse(template);\n\n  //  \u8FD9\u91CC\u8F6C\u5316\u8981\u8FDB\u884C\u6536\u96C6\u6240\u9700\u8981\u7684\u65B9\u6CD5  createElementVnode\n  transform(ast);\n\n  const code = generate(ast);\n  return code;\n}\n"],
  "mappings": "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",
  "names": ["i"]
}
